apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
 name: allow-ingress
spec:
 podSelector:
 matchLabels:
 app: front-end
 policyTypes:
 - Ingress
 ingress:
 - from:
   - podSelector:
     matchLabels:
       app: back-end
   - podSelector:
     matchLabels:
       app: front-end
 ports:
 - protocol: TCP
 port: 80
---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
 name: admin-egress
spec:
 podSelector:
 matchLabels:
 app: back-end
 policyTypes:
 - Egress
 egress:
 - to:
   - podSelector:
     matchLabels:
       app: front-end
 ports:
 - protocol: TCP
 port: 80
